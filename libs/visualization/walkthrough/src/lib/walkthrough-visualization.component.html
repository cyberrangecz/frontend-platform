<div>
    <div class="button-container">
        <mat-form-field appearance="fill">
            <mat-label>Choose Training Level</mat-label>
            <mat-select (selectionChange)="onSelectionChange($event)">
                <mat-option *ngFor="let level of levels" [value]="level.id">
                    <span *ngIf="level.order"> {{ level.order }}. </span>
                    {{ level.title }}
                </mat-option>
            </mat-select>
        </mat-form-field>
    </div>
    <div class="container" *ngIf="data$ | async as data; else noData">
        <div class="top-container" *ngIf="data !== null">
            <h2>{{ data.title }}</h2>
        </div>
        <div *ngIf="data.usersData.length > 0; else noTrainees" class="chartContainer">
            <crczp-walkthrough-visualization-wrapper [data]="data" />
        </div>
        <ng-template #noTrainees>
            <div class="message-container">
                <h3 class="empty-data">*No trainees present for selected level</h3>
            </div>
        </ng-template>
    </div>

    <ng-template #noData>
        <div class="message-container">
            <h3 *ngIf="!(levels.length > 0); else missingData" class="empty-data">*Missing levels for visualization</h3>
            <ng-template #missingData>
                <h3 class="empty-data">*Given instance does not have any data for selected level</h3>
            </ng-template>
        </div>
    </ng-template>
</div>
