@if (visualizationData()) {
    <div class="vis-participant-grid" [style.width]="gridWidth + 'px'">
        <div class="viz-hurdling-trainee-tooltip"></div>
        <div class="displayed-indicator">
            {{ getDisplayedTrainees().length }} of <span>{{ visualizationData().trainees.length }} trainees</span>
            displayed

            <span><button class="trainee-selector" mat-button (click)="showAllTrainees()">Show all</button></span>
            <span><button class="trainee-selector" mat-button (click)="hideAllTrainees()">Hide all</button></span>

        </div>
        <mat-grid-list cols="{{ numberOfColumns }}" [rowHeight]="rowHeight">
            @for (trainee of visualizationData().trainees; track trainee) {
                <mat-grid-tile class="participant-tile">
                    <ng-container>
                        <div class="participant-tile-container" (mouseover)="over(trainee)"
                             (mouseout)="out()">
                            <div
                                (click)="checkIfActive(trainee) ? toggleTrainee(trainee) : false"
                                [ngClass]="{
   					    unselected: !checkIfSelected(trainee),
					    selected: checkIfSelected(trainee),
					    pointer: checkIfActive(trainee)
					}"
                                class="trainee-container">
                                <div class="trainee-avatar-container"
                                     [matTooltip]="buildTraineeTooltip(trainee)"
                                     [ngClass]="{ 'not-active': !checkIfActive(trainee) }">
                                    <img class="participant-avatar"
                                         src="{{'data:image/jpg;base64,' + trainee.picture}}">
                                </div>
                                @if (!checkIfActive(trainee)) {
                                    <div [matTooltip]="'no training data available'"
                                         class="not-active-text overlap">
                                        N/A
                                    </div>
                                }
                            </div>
                            <div (click)="checkIfActive(trainee) ? toggleTrainee(trainee) : false"
                                 class="participant-name"
                                 [ngClass]="{
						 'not-active': !checkIfActive(trainee),
						 pointer: checkIfActive(trainee),
						 'unselected-name': !checkIfSelected(trainee)
						 }">
                                {{ trainee.name }}
                            </div>
                            @if (checkIfActive(trainee) && hasWarnings(trainee)) {
                                <div (click)="fadeCurrentWarnings(trainee)"
                                     class="warning"
                                     [ngClass]="{'faded': allCurrentWarningsFaded(trainee) }"
                                     [matTooltipClass]="'trainee-selection-warning'"
                                     [matTooltip]="buildWarningTooltip(trainee)">
                                    !
                                </div>
                            }
                        </div>
                    </ng-container>
                </mat-grid-tile>
            }

        </mat-grid-list>
    </div>
}
