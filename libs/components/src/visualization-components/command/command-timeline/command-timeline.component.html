@if (!trainingRunId) {
  <div class="selection-container">
    <div class="selection-content">
      <mat-form-field appearance="fill">
        <mat-label>Choose a trainee</mat-label>
        <mat-select [value]="selectedTrainingRun$ | async" (selectionChange)="onTraineeSelect($event)">
          <mat-option>--</mat-option>
          @for (trainingRun of trainingRuns$ | async; track trainingRun) {
            <mat-option [value]="trainingRun.id">
              <div class="resource-info">
                <span class="resource-title">{{ trainingRun.player.name }}</span>
                <span class="resource-subtitle"> (Training Run ID: {{ trainingRun.id }})</span>
              </div>
            </mat-option>
          }
        </mat-select>
      </mat-form-field>
      <button
        mat-raised-button
        color="primary"
        [disabled]="(selectedTrainingRun$ | async) === null"
        (click)="onSubmit()"
        >
        Show Timeline
      </button>
    </div>
  </div>
}

@if (commands$ | async; as commands) {
  <div>
    @if (commands.length && commands.length > 0) {
      <div class="timeline-content">
        <mgl-timeline [toggle]="true" [alternate]="false" [side]="'right'">
          @for (command of commands; track command) {
            <mgl-timeline-entry>
              <mgl-timeline-entry-side class="time">
                {{ command.trainingTime }}
              </mgl-timeline-entry-side>
              <mgl-timeline-entry-header>
                <div>{{ command.cmd }} {{ command.options }}</div>
              </mgl-timeline-entry-header>
              <mgl-timeline-entry-content
                [expandAnimationTiming]="'200ms ease'"
                [collapseAnimationTiming]="'100ms ease'"
                >
                <div>
                  <div><b>Command type: </b>{{ command.commandType }}</div>
                  <div><b>IP: </b>{{ command.fromHostIp }}</div>
                </div>
              </mgl-timeline-entry-content>
              <mgl-timeline-entry-dot [size]="SIZE" />
            </mgl-timeline-entry>
          }
        </mgl-timeline>
      </div>
    } @else {
      <h3 class="no-commands-content">No commands for selected training run present</h3>
    }
  </div>
}

