<div
    #topologyTabsDiv
    (sentinelResize)="updateTopologyDimensions()" [class.mat-elevation-z2]="true"
    class="toplogy-tabs-wrapper
            wh-100 {{(synchronizerService.topologyCollapsed$ | async)  ? 'topology-tabs-wrapper--collapsed': ''}}
            {{standalone() ? 'topology-tabs-wrapper--standalone' : ''}}
        ">
    @if (!(synchronizerService.topologyCollapsed$ | async) && (window.innerWidth) > 1400 && !standalone()) {
        <div (mousedown)="mouseDown($event)" class="draggable-bar"></div>
    }
    <mat-tab-group
        [(selectedIndex)]="selectedIndex"
        [animationDuration]="0"
        [mat-stretch-tabs]="false"
        [preserveContent]="true"
        class="wh-100 no-scroll-tabs"
    >
        <mat-tab
            class="wh-100 topology-tab"
        >
            <ng-template mat-tab-label>
              <span class="tab-label">
                  Topology
              </span>
            </ng-template>
            <crczp-topology-graph
                (openConsole)="handleOpenConsole($event)"
                [topology]="topology()"
            />

        </mat-tab>
        @for (tab of tabs(); track tab) {
            <ng-container>
                <mat-tab [matTooltip]="tab.nodeId">
                    <ng-template mat-tab-label>
                      <span (auxclick)="handleTabClick($event, $index)" class="tab-label">
                          <span class="tab-ip">{{ tab.nodeId }}</span>
                          <button (click)="closeTab($index)" class="close-tab-button">
                                <mat-icon class="close-icon">close</mat-icon>
                          </button>
                      </span>
                    </ng-template>

                    <crczp-console-view
                        [connectionParams]="{
                            withGui: tab.inGui,
                            sandboxUuid: sandboxUuid(),
                            nodeName: tab.nodeId,
                        }"
                        class="block wh-100"
                    />
                </mat-tab>
            </ng-container>
        }
    </mat-tab-group>
</div>
