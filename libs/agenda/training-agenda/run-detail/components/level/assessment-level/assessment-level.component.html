@let isBacktracked = (runService.runInfo$.observeProperty().isBacktracked.$() | async);
<div class="container">
    <div class="level-content">
        <sentinel-markdown-view [markdown]="(level$|async).instructions" />
        <!-- QUESTIONS -->
        <div class="questions">
            @for (question of (level$|async).questions; track question; let i = $index) {
                <div class="question">
                    <mat-divider />
                    <crczp-trainee-question (contentChanged)="onContentChanged()" [index]="i + 1"
                                            [isBacktracked]="isBacktracked"
                                            [question]="question">
                    </crczp-trainee-question>
                </div>
            }
        </div>
    </div>
    <!-- Differentiate submit action by different button style -->
    @if (isBacktracked) {
        <button
            (click)="this.runService.nextLevel()"
            class="next-button"
            mat-raised-button>
            Next
        </button>
    } @else {
        <button
            (click)="submit()"
            [disabled]="!canSubmit"
            class="next-button"
            mat-flat-button>
            {{
                (runService.runInfo$
                    .observeProperty()
                    .isLastLevelDisplayed
                    .$()|async) ? "Finish" : "Submit"
            }}
        </button>
    }
</div>
