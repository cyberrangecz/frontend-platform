<mat-card appearance="outlined" class="info-card">
    <div class="left-panel">
        <div class="group-name">{{ group.name }}</div>
        <div class="group-description">{{ group.description }}</div>
        <div class="group-expiration">
            {{ group.expirationDate ? (group.expirationDate | date) : 'No expiration date' }}
        </div>
    </div>

    <div class="right-panel">
        <div class="icon-container">
            <mat-icon class="icon" matTooltip="Users">people_outline</mat-icon>
            <div class="icon-text">{{ group.members.length }}</div>
        </div>
        <div class="icon-container">
            <mat-icon class="icon" matTooltip="Roles">admin_panel_settings</mat-icon>
            <div class="icon-text">{{ group.roles.length }}</div>
        </div>
    </div>
</mat-card>
<mat-card appearance="outlined" class="members-card">
    <sentinel-table
        (tableLoad)="onMembersLoadEvent($event)"
        [data]="members$ | async"
        [defaultSortDirection]="INIT_SORT_DIR"
        [defaultSortName]="INIT_MEMBERS_SORT_NAME"
        [elevation]="0"
        [hasError]="membersTableHasError$ | async"
        [isLoading]="isLoadingMembers$ | async"
    >
        <ng-container *sentinelRow="'picture'; template: userPicture" />
    </sentinel-table>
</mat-card>
<mat-card appearance="outlined" class="roles-card">
    <sentinel-table
        (tableLoad)="onRolesLoadEvent($event)"
        [data]="roles$ | async"
        [defaultSortDirection]="INIT_SORT_DIR"
        [defaultSortName]="INIT_ROLES_SORT_NAME"
        [elevation]="0"
        [hasError]="rolesTableHasError$ | async"
        [isLoading]="isLoadingRoles$ | async"
    >
    </sentinel-table>
</mat-card>


<ng-template #userPicture let-row>
    <img [alt]="row.element.name" class="user-picture" src="{{'data:image/png;base64,'+row.element.picture}}" />
</ng-template>
