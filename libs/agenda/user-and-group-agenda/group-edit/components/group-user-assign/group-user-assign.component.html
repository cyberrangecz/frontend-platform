<sentinel-controls [controls]="assignUsersControls"
                   class="to-assign-controls" />
<div class="add-content">
    <mat-card appearance="outlined">
        <mat-card-header class="hflex jc-flex-start ai-center">
            <div mat-card-avatar>
                <mat-icon class="header-icon" color="primary">person_add</mat-icon>
            </div>
            <mat-card-title>Add users</mat-card-title>
            <mat-card-subtitle>Add users individually</mat-card-subtitle>
        </mat-card-header>
        <mat-card-content class="m-1rem-top">
            <sentinel-resource-selector (fetch)="searchUsers($event)"
                                        (selectionChange)="onUserToAssignSelection($event)"
                                        [resourceMapping]="userMapping"
                                        [resources]="users$ | async"
                                        [selected]="selectedUsersToAssign$ | async"
                                        class="user-selector"
                                        searchPlaceholder="Search users by surname" />
        </mat-card-content>
    </mat-card>

    <mat-card appearance="outlined">
        <mat-card-header class="hflex jc-flex-start ai-center">
            <div mat-card-avatar>
                <mat-icon class="header-icon" color="primary">group_add</mat-icon>
            </div>
            <mat-card-title>Import users</mat-card-title>
            <mat-card-subtitle>Import users from already existing groups</mat-card-subtitle>
        </mat-card-header>
        <mat-card-content class="m-1rem-top">
            <sentinel-resource-selector (fetch)="searchGroups($event)"
                                        (selectionChange)="onGroupToImportSelection($event)"
                                        [resourceMapping]="groupMapping"
                                        [resources]="groups()"
                                        [selected]="selectedGroupsToImport()"
                                        class="group-selector"
                                        searchPlaceholder="Search groups by name" />
        </mat-card-content>
    </mat-card>
</div>

<sentinel-controls [controls]="assignedUsersControls"
                   class="assigned-controls" />
<mat-card appearance="outlined">
    <mat-card-header class="hflex jc-flex-start ai-center">
        <div mat-card-avatar>
            <mat-icon class="header-icon" color="primary">person</mat-icon>
        </div>
        <mat-card-title> Members of group {{ group().name }}</mat-card-title>
    </mat-card-header>
    <mat-card-content class="m-1rem-top">
        <sentinel-table
            (rowSelection)="onAssignedUsersSelection($event)"
            (tableLoad)="onAssignedLoadEvent($event)"
            [data]="assignedUsers$ | async"
            [defaultSortDirection]="MEMBERS_OF_GROUP_INIT_SORT_DIR"
            [defaultSortName]="MEMBERS_OF_GROUP_INIT_SORT_NAME"
            [elevation]="0"
            [hasError]="assignedUsersHasError$ | async"
            [isLoading]="isLoadingAssignedUsers$ | async" />
    </mat-card-content>
</mat-card>

