<mat-card appearance="outlined">
    <mat-card-header>
        <div class="w-100 hflex ai-c jc-s">
            <img [src]="stage?.logoSrc" alt="stage logo" class="stage-logo">
            <mat-card-title>{{ stage?.title }}</mat-card-title>
        </div>
        @if (window.innerWidth > 3000) {
            <sentinel-button-with-icon
                [icon]="'zoom_out_map'"
            >
            </sentinel-button-with-icon>
        }
    </mat-card-header>
    <mat-card-content>
        <crczp-request-stage-header [stage]="stage" class="m-2rem-l" />
        @if (stage?.hasDetail) {
            <mat-expansion-panel
                (closed)="onPanelStateChange(false)"
                (opened)="onPanelStateChange(true)"
                [disabled]="stage?.detailDisabled"
                [expanded]="stage.isExpanded || window.innerWidth > 3000"
                [hideToggle]="stage?.detailDisabled"
                class="mat-elevation-z1 stage-expansion-panel remove-mat-expansion-panel-padding">
                <mat-expansion-panel-header>
                    <mat-panel-title>Stage detail</mat-panel-title>
                </mat-expansion-panel-header>
                <ng-template matExpansionPanelContent>
                    <crczp-allocation-stage-detail
                        [height]="'500px'"
                        [stage]="stage" />
                </ng-template>
            </mat-expansion-panel>
        }
    </mat-card-content>
</mat-card>
